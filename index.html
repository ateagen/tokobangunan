<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>POS Kasir - Index</title>

<!-- ======================================
     CSS PATOKAN DESAIN
====================================== -->
<style>
:root {
  --bg: #f5f9ff;
  --primary: #48d487;
  --primary-dark: #2fa76a;
  --text: #0d1b2a;
  --radius: 16px;
  --shadow: 0 4px 10px rgba(0,0,0,0.1);
}

body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

.container {
  width: 100%;
  max-width: 420px;
  padding: 20px;
  text-align: center;
}

h1 {
  font-size: 26px;
  font-weight: bold;
  margin-top: 30px;
  margin-bottom: 10px;
}

.subtitle {
  font-size: 15px;
  margin-bottom: 35px;
  opacity: 0.8;
}

/* GRID BUTTON */
.menu-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
}

.menu-btn {
  background: var(--primary);
  border: none;
  padding: 22px 0;
  color: white;
  font-size: 18px;
  font-weight: bold;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: 0.2s;
}

.menu-btn:active {
  background: var(--primary-dark);
  transform: scale(0.96);
}

/* SPINNER LOADING */
#loadingSpinner {
  display: none;
  margin-top: 20px;
}
.spinner {
  width: 38px;
  height: 38px;
  border: 4px solid #ddd;
  border-top-color: var(--primary);
  border-radius: 50%;
  animation: spin 0.9s linear infinite;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* RESPONSIVE */
@media (max-width: 480px) {
  h1 { font-size: 22px; }
  .menu-btn { font-size: 16px; padding: 18px 0; }
}
</style>
</head>

<body>
<div class="container">

  <h1 id="welcomeTitle">Selamat Datang di POS Kasir</h1>
  <div class="subtitle" id="storeName">Memuat nama toko...</div>

  <!-- MENU GRID -->
  <div class="menu-grid">
    <button class="menu-btn" onclick="goKasir()">Kasir</button>
    <button class="menu-btn" onclick="goAdmin()">Admin</button>
    <button class="menu-btn" onclick="goStokRiwayat()">Stok Dan Riwayat perubahan stok</button>
  </div>

  <!-- SPINNER -->
  <div id="loadingSpinner">
    <div class="spinner"></div>
  </div>

</div>

<!-- ======================================
     SUPABASE SETUP
====================================== -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://mcqjsoadadjrjwwqfzjh.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable___GKiTfqGSEgxJ4-MZtfow_MnkSZUu5";
const db = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

/* ===============================
   LOAD NAMA TOKO OTOMATIS
===============================*/
async function loadStoreName() {
    const title = document.getElementById("storeName");
    const loading = document.getElementById("loadingSpinner");

    loading.style.display = "block";

    const { data, error } = await db
        .from("toko_info")
        .select("nama_toko")
        .limit(1)
        .maybeSingle();

    loading.style.display = "none";

    if (error) {
        title.textContent = "Gagal memuat nama toko";
        return;
    }

    if (!data) {
        title.textContent = "Nama toko belum diatur";
    } else {
        title.textContent = data.nama_toko;
    }
}

loadStoreName();

/* ===============================
   NAVIGASI
===============================*/
function goKasir(){
    window.location.href = "kasir.html";
}
function goAdmin(){
    window.location.href = "admin.html";
}
function goStokRiwayat(){
    window.location.href = "stokriwayat.html";
}
</script>

</body>
</html>
